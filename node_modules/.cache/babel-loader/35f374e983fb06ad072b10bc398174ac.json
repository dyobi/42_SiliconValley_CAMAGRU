{"ast":null,"code":"var _jsxFileName = \"/Users/dyobi/Desktop/camagru/src/components/body/album/index.jsx\";\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { GoComment, GoHeart } from \"react-icons/go\";\nimport { IoIosCloseCircleOutline } from \"react-icons/io\";\nimport { album_arr, ui_nav, album_view_id, acc_user, acc_signin } from '../../../actions';\nimport { IoIosAddCircleOutline } from \"react-icons/io\"; // import { isMobile } from \"react-device-detect\";\n\nimport './index.css';\nimport axios from 'axios';\n\nfunction BodyAlbum() {\n  const dispatch = useDispatch();\n  let album = useSelector(state => state.album);\n  let acc = useSelector(state => state.acc);\n\n  function One_del(e) {\n    axios.post('/pic_del', {\n      pic: e,\n      user: acc.user\n    }).then(res => {\n      if (res.data === 11) {\n        alert('Session is expired !');\n        dispatch(ui_nav(3));\n        dispatch(acc_user(''));\n        dispatch(acc_signin(0));\n      } else if (res.data) {\n        alert('Successfully Deleted !');\n\n        _handleAlbum();\n      } else {\n        alert('You are not allowed to delete this pic !');\n      }\n    });\n  }\n\n  function _handleAlbum() {\n    axios.post('/picture', {\n      user: acc.user\n    }).then(res => {\n      let temp = res.data;\n      const promises = temp.map((each, index) => {\n        return axios.post('/display_comment', {\n          pic: each.pic\n        }).then(res2 => {\n          const tmp = {\n            comments: res2.data\n          };\n          temp[index] = Object.assign(each, tmp);\n        });\n      });\n      Promise.all(promises).then(() => {\n        dispatch(album_arr(temp));\n      });\n    });\n  }\n\n  function _like(e) {\n    if (acc.user !== '') {\n      axios.post('/like', {\n        id: acc.user,\n        pic: e\n      }).then(res => {\n        if (res.data !== 11) {\n          _handleAlbum();\n        } else {\n          alert('Session is expired !');\n          dispatch(ui_nav(3));\n          dispatch(acc_user(''));\n          dispatch(acc_signin(0));\n        }\n      });\n    } else {\n      alert('Log in first !');\n      dispatch(ui_nav(3));\n    }\n  }\n\n  function _comment(index) {\n    if (album.view_id === index) {\n      dispatch(album_view_id(-1));\n    } else {\n      dispatch(album_view_id(index));\n    }\n  }\n\n  function Comment_push(e) {\n    if (acc.user === '') {\n      alert('Log in first !');\n      dispatch(ui_nav(3));\n    } else if (document.getElementById('post_comment').textContent === '') {\n      console.log('Nothing');\n    } else {\n      axios.post('/comment_push', {\n        text: document.getElementById('post_comment').textContent,\n        user: acc.user,\n        pic: e\n      }).then(res => {\n        if (res.data !== 11) {\n          document.getElementById('post_comment').textContent = '';\n\n          _handleAlbum();\n        } else {\n          alert('Session is expired !');\n          dispatch(ui_nav(3));\n          dispatch(acc_user(''));\n          dispatch(acc_signin(0));\n        }\n      });\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"body-album\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"body-album-part\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, album.arr.map((each, index) => React.createElement(\"div\", {\n    className: \"body-album-each\",\n    key: index,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, each.filter === -1 ? React.createElement(\"div\", {\n    className: \"body-album-pic\",\n    style: {\n      backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }) : '', each.filter === 0 ? React.createElement(\"div\", {\n    className: \"body-album-pic1\",\n    style: {\n      backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }) : '', each.filter === 1 ? React.createElement(\"div\", {\n    className: \"body-album-pic2\",\n    style: {\n      backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }) : '', each.filter === 2 ? React.createElement(\"div\", {\n    className: \"body-album-pic3\",\n    style: {\n      backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }) : '', each.is_like === null ? React.createElement(GoHeart, {\n    className: \"body-album-ft-1\",\n    onClick: () => _like(each.pic),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }) : React.createElement(GoHeart, {\n    className: \"body-album-ft-1-1\",\n    onClick: () => _like(each.pic),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), each.display === 0 ? React.createElement(GoComment, {\n    className: \"body-album-ft-2\",\n    onClick: () => _comment(index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }) : React.createElement(GoComment, {\n    className: \"body-album-ft-2-1\",\n    onClick: () => _comment(each.pic, index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"body-album-postid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, each.name), React.createElement(IoIosCloseCircleOutline, {\n    className: \"body-album-ft2\",\n    onClick: () => One_del(each.pic),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"count_like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, each.count, \" Likes\"), React.createElement(\"div\", {\n    className: \"count_comment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, each.count_text, \" Comments\"), each.display === 0 ? React.createElement(\"div\", {\n    className: \"body-album-comment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, each.explain) : '', index === album.view_id ? React.createElement(\"div\", {\n    className: \"body-album-comment-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, each.count_text === 0 ? React.createElement(\"div\", {\n    className: \"ba-comment-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"No comments yet\") : React.createElement(\"div\", {\n    id: 'ba-comment-top-' + index,\n    className: \"ba-comment-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, each.comments.map((contents, idx) => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"each_comment\",\n    key: idx,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, contents.name, \" : \", contents.text), React.createElement(IoIosCloseCircleOutline, {\n    className: \"each_comment_del\",\n    key: idx,\n    onClick: () => Com_del(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    type: \"text\",\n    className: \"ba-comment-btm\",\n    contentEditable: \"true\",\n    id: \"post_comment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }), React.createElement(IoIosAddCircleOutline, {\n    className: \"ba-comment-send\",\n    onClick: () => Comment_push(each.pic),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })) : ''))));\n}\n\nexport default BodyAlbum;","map":{"version":3,"sources":["/Users/dyobi/Desktop/camagru/src/components/body/album/index.jsx"],"names":["React","useSelector","useDispatch","GoComment","GoHeart","IoIosCloseCircleOutline","album_arr","ui_nav","album_view_id","acc_user","acc_signin","IoIosAddCircleOutline","axios","BodyAlbum","dispatch","album","state","acc","One_del","e","post","pic","user","then","res","data","alert","_handleAlbum","temp","promises","map","each","index","res2","tmp","comments","Object","assign","Promise","all","_like","id","_comment","view_id","Comment_push","document","getElementById","textContent","console","log","text","arr","filter","backgroundImage","is_like","display","name","count","count_text","explain","contents","idx","Com_del"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { GoComment, GoHeart } from \"react-icons/go\";\nimport { IoIosCloseCircleOutline } from \"react-icons/io\";\nimport { album_arr, ui_nav, album_view_id, acc_user, acc_signin } from '../../../actions';\nimport { IoIosAddCircleOutline } from \"react-icons/io\";\n// import { isMobile } from \"react-device-detect\";\n\nimport './index.css';\n\nimport axios from 'axios';\n\nfunction BodyAlbum () {\n    const dispatch = useDispatch();\n    let album = useSelector(state => state.album);\n    let acc = useSelector(state => state.acc);\n\n    function One_del (e) {\n        axios.post('/pic_del', {\n            pic: e,\n            user: acc.user\n        })\n        .then(res => {\n            if (res.data === 11) {\n                alert('Session is expired !');\n                dispatch(ui_nav(3));\n                dispatch(acc_user(''));\n                dispatch(acc_signin(0));\n            } else if (res.data) {\n                alert('Successfully Deleted !');\n                _handleAlbum();\n            }\n            else {\n                alert('You are not allowed to delete this pic !');\n            }\n        })\n    }\n\n    function _handleAlbum() {\n        axios.post('/picture', {\n            user: acc.user\n        })\n        .then(res => {\n            let temp = res.data;\n            const promises = temp.map((each, index) => {\n                return axios.post('/display_comment', {\n                        pic: each.pic\n                    })\n                    .then(res2 => {\n                        const tmp = {\n                            comments: res2.data\n                        }\n                        temp[index] = Object.assign(each, tmp);\n                    });\n            });\n            Promise.all(promises).then(() => {\n                dispatch(album_arr(temp));\n            });\n        });\n    }\n\n    function _like(e) {\n        if (acc.user !== '') {\n            axios.post('/like', {\n                id: acc.user,\n                pic: e\n            })\n            .then(res => {\n                if (res.data !== 11) {\n                    _handleAlbum();\n                } else {\n                    alert('Session is expired !');\n                    dispatch(ui_nav(3));\n                    dispatch(acc_user(''));\n                    dispatch(acc_signin(0));\n                }\n            })\n        }\n        else {\n            alert('Log in first !');\n            dispatch(ui_nav(3));\n        }\n    }\n\n    function _comment(index) {\n        if (album.view_id === index) {\n            dispatch(album_view_id(-1));\n        } else {\n            dispatch(album_view_id(index));\n        }\n    }\n\n    function Comment_push(e) {\n        if (acc.user === '') {\n            alert('Log in first !');\n            dispatch(ui_nav(3));\n        } else if (document.getElementById('post_comment').textContent === '') {\n            console.log('Nothing')\n        } else {\n            axios.post('/comment_push', {\n                text: document.getElementById('post_comment').textContent,\n                user: acc.user,\n                pic: e\n            })\n            .then(res => {\n                if (res.data !== 11) {\n                    document.getElementById('post_comment').textContent = '';\n                    _handleAlbum();\n                } else {\n                    alert('Session is expired !');\n                    dispatch(ui_nav(3));\n                    dispatch(acc_user(''));\n                    dispatch(acc_signin(0));\n                }\n            })\n        }\n    }\n\n    return (\n        <div className=\"body-album\">\n            <div className=\"body-album-part\">\n                { album.arr.map((each, index) =>\n                    <div className=\"body-album-each\" key={index} >\n                        {each.filter === -1 ? <div className=\"body-album-pic\" style={{ backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')' }} /> : ''}\n                        {each.filter === 0 ? <div className=\"body-album-pic1\" style={{ backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')' }} /> : ''}\n                        {each.filter === 1 ? <div className=\"body-album-pic2\" style={{ backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')' }} /> : ''}\n                        {each.filter === 2 ? <div className=\"body-album-pic3\" style={{ backgroundImage: 'url(\\'data:image/jpeg;base64,' + each.temp + '\\')' }} /> : ''}\n                        {each.is_like === null ? <GoHeart className=\"body-album-ft-1\" onClick={() => _like(each.pic)} /> : <GoHeart className=\"body-album-ft-1-1\" onClick={() => _like(each.pic)} />}\n                        {each.display === 0 ? <GoComment className=\"body-album-ft-2\" onClick={() => _comment(index)} /> : <GoComment className=\"body-album-ft-2-1\" onClick={() => _comment(each.pic, index)} />}\n                        <div className=\"body-album-postid\">{each.name}</div>\n                        <IoIosCloseCircleOutline className=\"body-album-ft2\" onClick={() => One_del(each.pic)} />\n                        <div className=\"count_like\">{each.count} Likes</div>\n                        <div className=\"count_comment\">{each.count_text} Comments</div>\n                        {each.display === 0 ? <div className=\"body-album-comment\">{each.explain}</div> : ''}\n                        {index === album.view_id ?\n                            <div className=\"body-album-comment-1\">\n                                {each.count_text === 0 \n                                    ? \n                                    <div className=\"ba-comment-top\">No comments yet</div>\n                                    :\n                                    <div id={'ba-comment-top-' + index} className=\"ba-comment-top\">\n                                        {each.comments.map((contents, idx) => \n                                            <div>\n                                                <div className=\"each_comment\" key={idx}>{contents.name} : {contents.text}</div>\n                                                <IoIosCloseCircleOutline className=\"each_comment_del\" key={idx} onClick={() => Com_del()}/>\n                                            </div>\n                                        )}\n                                    </div>\n                                }\n                                <div type=\"text\" className=\"ba-comment-btm\" contentEditable=\"true\" id=\"post_comment\" />\n                                <IoIosAddCircleOutline className=\"ba-comment-send\" onClick={() => Comment_push(each.pic)} />\n                            </div>\n                        : '' }\n                    </div>\n                )} \n            </div>\n        </div>\n    );\n}\n\nexport default BodyAlbum;"]},"metadata":{},"sourceType":"module"}